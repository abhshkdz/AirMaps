<!doctype html>
<html>
<head>
	<title>Hello World!</title>
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script src="math3d.js"></script>
	<script src="keyboard-focus-hack.js"></script>
	<script src="firstpersoncam.js"></script>
</head>
<body onload="init()" onkeydown="return keyDown(event)" onkeyup="return keyUp(event)" id="body" cz-shortcut-listen="true">
	<div id="map3d"></div>
	<script type="text/javascript">
		google.load("earth", "1");

		var ge = null;
		var cam;

		function init() {
		  init3D();
		}

		function initCB(object) {
		  ge = object;
		  ge.getOptions().setFlyToSpeed(100);

		  ge.getLayerRoot().enableLayerById(ge.LAYER_BUILDINGS, true);
	  	ge.getLayerRoot().enableLayerById(ge.LAYER_TERRAIN, true);
			ge.getLayerRoot().enableLayerById(ge.LAYER_TREES, true);
			ge.getLayerRoot().enableLayerById(ge.LAYER_ROADS, true);

		  cam = new FirstPersonCam();
		  cam.updateCamera();
		  ge.getWindow().setVisibility(true);

		  keyboardFocusHack(ge);
		}

		function failureCB(object) {
		  /***
		   * This function will be called if plugin fails to load, in case
		   * you need to handle that error condition.
		   ***/
		   console.log(object);
		}

		function init3D() {
		  google.earth.createInstance("map3d", initCB, failureCB);
		}

  </script>
</body>
</html>
